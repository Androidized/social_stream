<section id="<%= document.class.to_s.underscore %>">
  <%= render :partial => 'objects/show',
             :locals  => { :object => document } %>

  <% profile_subject ||= document.owner_subject %>

  <% content_for :title do %>
    <%= profile_subject.name + ": " + t('repository.title') %>
  <% end %>

  <%= div_for document do %>
    <%= render partial: "#{ document.class.to_s.tableize }/#{ document.class.to_s.underscore }_show",
               locals: { document.class.to_s.underscore.to_sym => document } %>
     
    <div class="tabbable">
      <ul class="nav nav-tabs">
        <li class="<%= document_details_tab_class document, :info %>">
          <a data-toggle="tab" href="#document-info">
            <i class='fa fa-th-list'> <%= t('document.details.info') %> </i>
          </a>
        </li>
        <% if can? :update, document %>
          <li class="<%= document_details_tab_class document, :edit %>">
            <a data-toggle="tab" href="#document-edit"> 
              <i class='fa fa-edit'> <%= t('document.actions.edit') %></i>  
            </a>
          </li>
        <% end %>

        <li>
          <%= link_to raw("<i class='fa fa-save'></i> "), download_document_path(document), title: t('document.actions.download') %>
        </li>
        <li>
          <% if can? :destroy, document %>
            <%= link_to raw("<i class='fa fa-trash-o'></i> "),  document,
                        confirm: t('confirm_delete', scope: document.class.to_s.underscore),
                        title: t('document.actions.delete'),
                        method: :delete %>
          <% end %>
        </li>
      </ul>


      <div class="tab-content">
        <div class="tab-pane <%= document_details_tab_class document, :info %>" id="document-info">
          <%= render partial: "common_documents/info", locals: { document: document } %>
        </div>
        <% if can? :update, document %>
          <div class="tab-pane <%= document_details_tab_class document, :edit %>" id="document-edit">
            <%= render partial: 'common_documents/form', locals: { document: document } %>
          </div>
        <% end %>
      
        <h5 class="lead">
          <%= t 'comment.title.other' %>
        </h5>
        <div id="comments" class="comments">
          <%= render :partial => 'activities/comments', :locals => { :activity => document.post_activity } %>
          <%= render :partial => 'comments/new', :locals => { :activity => document.post_activity } %>
        </div>
      </div>
    </div>
  <% end %>
</section>
